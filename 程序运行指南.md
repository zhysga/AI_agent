# AutoGen智能Agent模板项目运行指南

本指南将详细介绍如何逐步运行AutoGen智能Agent模板项目。

## 📋 运行前准备

### 1. 环境要求

- Python 3.8或更高版本
- 操作系统：Windows、Linux或macOS

### 2. 克隆或下载项目

确保你已经将项目代码下载到本地计算机。

### 3. 安装依赖

在项目根目录下打开终端，运行以下命令安装项目依赖：

```bash
pip install -r requirements.txt
```

### 4. 配置环境变量

在项目根目录创建`.env`文件，并根据需要使用的模型添加相应的API密钥：

```
# DeepSeek API配置
DEEPSEEK_API_KEY=your_deepseek_api_key

# 文心一言(Doubao) API配置
DOUBAO_API_KEY=your_doubao_api_key
DOUBAO_SECRET_KEY=your_doubao_secret_key

# 通义千问(Qwen) API配置
QWEN_API_KEY=your_qwen_api_key
QWEN_API_SECRET=your_qwen_api_secret
```

注意：请将`your_xxx_api_key`等占位符替换为你实际的API密钥。

## ▶️ 运行示例程序

项目提供了两个示例程序，分别演示单个智能体和多智能体协作的使用方法。

### 1. 单个智能体示例

#### 运行步骤：

1. 确保已正确配置环境变量，特别是你要使用的模型API密钥
2. 进入`examples`目录：
   ```bash
   cd examples
   ```
3. 运行示例程序：
   ```bash
   python simple_agent_example.py
   ```
4. 程序启动后，你将看到类似以下的提示：
   ```
   🤖 智能体对话系统已启动 (回退顺序: doubao → deepseek → qwen)
   💡 提示：输入'退出'结束对话
   
   你: 
   ```
5. 输入你的问题，按回车键发送
6. 程序将显示智能体的回复
7. 输入"退出"、"quit"、"exit"或"bye"结束对话

#### 配置说明：

- 该示例使用回退机制，优先顺序为：豆包 → DeepSeek → 通义千问
- 至少需要配置一个API密钥即可运行
- 程序会自动检测可用的模型并选择合适的进行对话

### 2. 多智能体协作示例

#### 运行步骤：

1. 确保已正确配置环境变量，特别是DeepSeek API密钥（默认使用DeepSeek模型）
2. 进入`examples`目录：
   ```bash
   cd examples
   ```
3. 运行示例程序：
   ```bash
   python multi_agent_collaboration.py
   ```
4. 程序启动后，你将看到类似以下的提示：
   ```
   多智能体协作系统启动选项:
   1. 基础版多智能体系统
   2. 扩展版多智能体系统
   3. 退出
   请选择 (1/2/3): 1
   已启动基础版多智能体协作系统
   多智能体协作系统已启动，开始对话 (输入'退出'结束对话):
   ==================================================
   你可以问我任何问题，我会组织多个专家智能体为你提供帮助。
   ==================================================
   回退顺序: doubao → deepseek → qwen
   ==================================================
   你: 
   ```
5. 输入你的问题，按回车键发送
6. 程序将显示系统处理过程和最终回复
7. 输入"退出"、"quit"、"exit"或"bye"结束对话

#### 系统特点：

- 包含多个专家智能体：代码专家、数据分析师、研究专家等
- 协调器智能体负责分配任务和综合回答
- 支持基础版和扩展版两种模式
- 使用回退机制，确保至少有一个模型可用

### 3. 运行测试脚本

运行测试脚本来验证示例程序：

```bash
cd examples
python test_examples.py
```

测试内容包括：
- 检查示例文件是否存在且可导入
- 验证必要的依赖包是否安装
- 确认类和方法定义是否正确

测试结果示例：
```
🚀 开始测试示例程序...

============================================================
检查依赖项
============================================================
✅ python-dotenv 已安装
✅ requests 已安装
✅ aiohttp 已安装
✅ pydantic 已安装

============================================================
测试: 单个智能体示例
============================================================
✅ 模块导入成功
✅ SimpleAgent 类存在
✅ 测试通过

============================================================
测试: 多智能体协作示例
============================================================
✅ 模块导入成功
✅ MultiAgentSystem 类存在
✅ ExtendedMultiAgentSystem 类存在
✅ 测试通过

============================================================
测试结果总结
============================================================
单个智能体示例: ✅ 通过
多智能体协作示例: ✅ 通过

🎯 测试完成！
```

### 4. 使用运行脚本（推荐）

使用统一的运行脚本来启动不同的示例：

```bash
cd examples
python run_examples.py
```

这个脚本提供菜单式界面：
- 运行单个智能体示例
- 运行多智能体协作示例
- 运行测试脚本
- 退出程序

运行前会自动检查必要的环境变量是否设置。

## ⚙️ 项目配置

### 模型配置

项目支持三种大语言模型：

1. **DeepSeek**：在`simple_agent_example.py`和`multi_agent_collaboration.py`中默认使用
2. **文心一言(Doubao)**：在`simple_agent_example.py`中可选
3. **通义千问(Qwen)**：在`simple_agent_example.py`中可选

### 智能体配置

#### 1. LLM智能体

LLM智能体是基于大语言模型的智能体，可以进行对话和问题回答。

#### 2. 工具智能体

工具智能体负责管理和执行各种工具，如文本处理、文件操作、网络请求等。

#### 3. 用户智能体

用户智能体模拟用户行为或处理用户输入。

## 🧪 调试和故障排除

### 常见问题

1. **API密钥错误**：
   - 确保`.env`文件中的API密钥正确无误
   - 确保`.env`文件位于项目根目录
   - 检查环境变量是否正确加载

2. **依赖安装失败**：
   - 确保网络连接正常
   - 尝试使用国内镜像源安装：
     ```bash
     pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
     ```

3. **模型连接失败**：
   - 检查网络连接
   - 确认API密钥有效
   - 检查模型服务是否正常

### 日志查看

程序运行时会输出日志信息，可以帮助诊断问题。日志级别设置为INFO，会显示程序运行的关键信息。

## 📚 进一步学习

1. 查看`README.md`了解项目详细设计和架构
2. 阅读各模块源代码深入了解实现细节
3. 尝试修改示例程序，添加自己的功能
4. 参考扩展指南创建新的模型客户端、工具或智能体类型